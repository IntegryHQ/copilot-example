"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/page",{

/***/ "(app-pages-browser)/./src/app/page.tsx":
/*!**************************!*\
  !*** ./src/app/page.tsx ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ Home)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/jsx-dev-runtime.js\");\n/* harmony import */ var _copilotkit_react_core__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @copilotkit/react-core */ \"(app-pages-browser)/./node_modules/@copilotkit/react-core/dist/chunk-2MPUQRAY.mjs\");\n/* harmony import */ var _copilotkit_react_core__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @copilotkit/react-core */ \"(app-pages-browser)/./node_modules/@copilotkit/react-core/dist/chunk-DCTJZ742.mjs\");\n/* harmony import */ var _copilotkit_react_core__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @copilotkit/react-core */ \"(app-pages-browser)/./node_modules/@copilotkit/react-core/dist/chunk-RYDEG77L.mjs\");\n/* harmony import */ var _copilotkit_react_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @copilotkit/react-core */ \"(app-pages-browser)/./node_modules/@copilotkit/react-core/dist/chunk-ZM6HV22S.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _integry_sdk__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @integry/sdk */ \"(app-pages-browser)/./node_modules/@integry/sdk/dist/esm/index.csm.js\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \nvar _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$();\n\n\n\nfunction Home() {\n    _s();\n    useIntegryCopilotKitIntegration();\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex items-center justify-center min-h-screen\",\n        children: \"Integry Marketplace\"\n    }, void 0, false, {\n        fileName: \"/Users/yasir/integry/devwork/copilot-kit/copilot-example/src/app/page.tsx\",\n        lineNumber: 15,\n        columnNumber: 5\n    }, this);\n}\n_s(Home, \"pNnxDWKybuAfXNlD39xU39vzQ+Y=\", false, function() {\n    return [\n        useIntegryCopilotKitIntegration\n    ];\n});\n_c = Home;\nconst appKey = \"3883c794-9d71-450e-b39d-dfa21ffab006\";\nconst appSecret = \"ffd3a8d4-7160-4a44-b603-08848420a108\";\nconst userId = \"yasir@integry.io\";\nfunction useIntegryCopilotKitIntegration() {\n    _s1();\n    const generalContext = (0,_copilotkit_react_core__WEBPACK_IMPORTED_MODULE_3__.useCopilotContext)();\n    const messagesContext = (0,_copilotkit_react_core__WEBPACK_IMPORTED_MODULE_4__.useCopilotMessagesContext)();\n    const context = {\n        ...generalContext,\n        ...messagesContext\n    };\n    const [integry, setIntegry] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        _integry_sdk__WEBPACK_IMPORTED_MODULE_2__.Helpers.getAuthHash(userId, appSecret).then((hash1)=>{\n            const integry = new _integry_sdk__WEBPACK_IMPORTED_MODULE_2__.IntegryJS({\n                appKey,\n                hash: hash1,\n                user: {\n                    userId: userId,\n                    apiKey: \"\"\n                }\n            });\n            setIntegry(integry);\n        }).catch((error)=>{\n            console.error(\"Error fetching auth hash:\", error);\n        });\n    }, []);\n    (0,_copilotkit_react_core__WEBPACK_IMPORTED_MODULE_5__.useCopilotAction)({\n        name: \"findAndExecuteFunction\",\n        description: '\\n      Find and execute a function. If the user requests a function not available, search the function catalog and execute the best match. YOU MUST NEVER ask the user to provide any arguments you think are missing. The user will be provided with a custom UI where they can fill out any missing arguments themselves. Inform the user if no matching function is found.\\n\\n      When using the findAndExecuteFunction tool, never ask the user for missing arguments; they will fill them out in a custom UI.\\n\\n      If the user wants to disconnect an app but doesn\\'t provide the app name, ask for it and format the query as disconnect.<app-name>.\\n\\n      If the user asks to connect to an app, obtain the app name and format the query as connect.<app-name>. Ensure the request is not to disconnect. Open an authentication window for the user to connect to the app. Once the window is closed, respond with \"Your <app-name> account is connected.\"\\n      ',\n        parameters: [\n            {\n                name: \"query\",\n                description: \"The query to search for a function\",\n                type: \"string\"\n            }\n        ],\n        handler: async (param)=>{\n            let { func } = param;\n            console.log(func);\n        },\n        renderAndWait: (param)=>{\n            let { args, handler, status } = param;\n            if (status === \"inProgress\") {\n                window.addEventListener(\"message\", (event)=>{});\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    children: \"Loading...\"\n                }, void 0, false, {\n                    fileName: \"/Users/yasir/integry/devwork/copilot-kit/copilot-example/src/app/page.tsx\",\n                    lineNumber: 75,\n                    columnNumber: 18\n                }, this);\n            } else if (status === \"executing\") {\n                console.log(args);\n                if (args.query.includes(\"disconnect\") && args.query.split(\".\")[1] && args.query.split(\".\").length === 2) {\n                    const appName = args.query.split(\".\")[1];\n                    integry.isConnected(appName).then((authorization_id)=>{\n                        if (authorization_id) {\n                            integry.disconnect(authorization_id).then((response)=>{\n                                handler();\n                            });\n                        } else {\n                            handler();\n                        }\n                    });\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            \"Disconnecting \",\n                            appName,\n                            \"...\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/yasir/integry/devwork/copilot-kit/copilot-example/src/app/page.tsx\",\n                        lineNumber: 94,\n                        columnNumber: 20\n                    }, this);\n                } else if (args.query.includes(\"connect\") && args.query.split(\".\")[1] && args.query.split(\".\").length === 2) {\n                    const appName = args.query.split(\".\")[1];\n                    integry.isConnected(appName).then((authorization_id)=>{\n                        if (authorization_id) {\n                            handler(\"Already connected.\");\n                        } else {\n                            integry.connect(appName).then((response)=>{\n                                handler(\"Connected successfully.\");\n                            });\n                        }\n                    });\n                    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        children: [\n                            \"Connecting \",\n                            appName,\n                            \"...\"\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/yasir/integry/devwork/copilot-kit/copilot-example/src/app/page.tsx\",\n                        lineNumber: 111,\n                        columnNumber: 20\n                    }, this);\n                }\n                const execute = ()=>{\n                    console.log(\"now executing the function...\");\n                    console.log(args);\n                    return fakeExecutingFunction(context, args.query);\n                };\n                fetchFunctions(appKey, hash, userId, true, args.query).then((data)=>{\n                    if (data.functions.length === 0) {\n                        handler(\"No appropriate function found.\");\n                        return;\n                    }\n                    integry.isConnected(data.functions[0].meta.app.name).then((authorization_id)=>{\n                        /**\n                   * returns the authorization_id if the app is connected\n                   * otherwise returns false\n                   */ if (authorization_id) {\n                            renderFunctionUI();\n                        } else {\n                            integry.connect(data.functions[0].meta.app.name).then((response)=>{\n                                renderFunctionUI();\n                            });\n                        }\n                    });\n                    function renderFunctionUI() {\n                        integry.renderFunctionUI(data.functions[0].name, data.functions[0].arguments).then((result)=>{\n                            integry.invokeFunction(result).then((response)=>{\n                                console.log(response);\n                                closePopup();\n                                handler(response);\n                            }).catch((error)=>{\n                                console.error(\"Error2:\", error);\n                            });\n                        }).catch((error)=>{\n                            console.error(\"Error2:\", error);\n                        });\n                    }\n                }).catch((error)=>{\n                    // Handle any errors from the fetchFunctions call\n                    console.error(\"Fetch failed:\", error);\n                });\n                return(// <ExecutionPrompt args={args} handler={handler} execute={execute} />\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    children: \"Setting this up for you...\"\n                }, void 0, false, {\n                    fileName: \"/Users/yasir/integry/devwork/copilot-kit/copilot-example/src/app/page.tsx\",\n                    lineNumber: 173,\n                    columnNumber: 13\n                }, this));\n            } else {\n                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        display: \"none\"\n                    },\n                    children: [\n                        \"Executed: \",\n                        args.query\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/yasir/integry/devwork/copilot-kit/copilot-example/src/app/page.tsx\",\n                    lineNumber: 176,\n                    columnNumber: 18\n                }, this);\n            }\n        }\n    });\n// useCopilotReadable({\n//   description: \"The list Integry functions.\",\n//   value: functions,\n// });\n}\n_s1(useIntegryCopilotKitIntegration, \"em1qDK4j+Wa3+sA1oxeb1YZkjcU=\", false, function() {\n    return [\n        _copilotkit_react_core__WEBPACK_IMPORTED_MODULE_3__.useCopilotContext,\n        _copilotkit_react_core__WEBPACK_IMPORTED_MODULE_4__.useCopilotMessagesContext,\n        _copilotkit_react_core__WEBPACK_IMPORTED_MODULE_5__.useCopilotAction\n    ];\n});\nfunction ExecutionPrompt(param) {\n    let { args, handler, execute } = param;\n    _s2();\n    const [buttonActive, setButtonActive] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        className: \"flex flex-col items-center space-y-4\",\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                children: [\n                    \"Do you want to execute the query: \",\n                    args.query,\n                    \"?\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/yasir/integry/devwork/copilot-kit/copilot-example/src/app/page.tsx\",\n                lineNumber: 216,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"flex space-x-4\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: \"px-4 py-2 text-white rounded \".concat(buttonActive ? \"bg-blue-300\" : \"bg-blue-500 hover:bg-blue-600\"),\n                        onClick: async ()=>{\n                            setButtonActive(true);\n                            const result = await execute();\n                            setButtonActive(false);\n                            handler({\n                                result\n                            });\n                        },\n                        disabled: buttonActive,\n                        children: \"Execute\"\n                    }, void 0, false, {\n                        fileName: \"/Users/yasir/integry/devwork/copilot-kit/copilot-example/src/app/page.tsx\",\n                        lineNumber: 218,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        className: \"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600\",\n                        onClick: ()=>handler(\"Function cancelled by the user. This is not an issue, it's ok.\"),\n                        children: \"Cancel\"\n                    }, void 0, false, {\n                        fileName: \"/Users/yasir/integry/devwork/copilot-kit/copilot-example/src/app/page.tsx\",\n                        lineNumber: 232,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/yasir/integry/devwork/copilot-kit/copilot-example/src/app/page.tsx\",\n                lineNumber: 217,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/yasir/integry/devwork/copilot-kit/copilot-example/src/app/page.tsx\",\n        lineNumber: 215,\n        columnNumber: 5\n    }, this);\n}\n_s2(ExecutionPrompt, \"3EjVUVtYcxofuPA8032aWxN9Myk=\");\n_c1 = ExecutionPrompt;\nasync function fakeExecutingFunction(context, query) {\n    const { fakeJSONResult } = await (0,_copilotkit_react_core__WEBPACK_IMPORTED_MODULE_6__.extract)({\n        context,\n        instructions: \"The user asked to find and execute a function. You are given a query.\" + \"Make up a fake JSON result that can be used to simulate executing a function.\",\n        parameters: [\n            {\n                name: \"fakeJSONResult\",\n                description: \"A fake JSON result that can be used to simulate executing a function.\",\n                type: \"string\"\n            }\n        ],\n        data: {\n            query\n        }\n    });\n    return fakeJSONResult;\n}\nasync function fetchFunctions(appKey, hash1, userId, predict, prompt) {\n    // Construct the URL with the provided parameters\n    const url = \"https://app.integry.io/functions/?app_key=\".concat(encodeURIComponent(appKey), \"&hash=\").concat(encodeURIComponent(hash1), \"&user_id=\").concat(encodeURIComponent(userId), \"&predict_function=\").concat(predict, \"&prompt=\").concat(encodeURIComponent(prompt), \"&include=meta&predict_arguments=true\");\n    try {\n        const response = await fetch(url, {\n            method: \"GET\"\n        });\n        if (!response.ok) {\n            throw new Error(\"Network response was not ok: \" + response.statusText);\n        }\n        const data = await response.json(); // Parse the JSON from the response\n        return data; // Return the data\n    } catch (error) {\n        console.error(\"There was a problem with the fetch operation:\", error);\n        throw error; // Rethrow the error if needed\n    }\n}\nasync function getIntegryFunctions(appKey, hash1, userId) {\n    // Construct the URL with the provided parameters\n    const url = \"https://app.integry.io/functions/?app_key=\".concat(encodeURIComponent(appKey), \"&hash=\").concat(encodeURIComponent(hash1), \"&user_id=\").concat(encodeURIComponent(userId));\n    try {\n        const response = await fetch(url, {\n            method: \"GET\"\n        });\n        if (!response.ok) {\n            throw new Error(\"Network response was not ok: \" + response.statusText);\n        }\n        const data = await response.json(); // Parse the JSON from the response\n        return data; // Return the data\n    } catch (error) {\n        console.error(\"There was a problem with the fetch operation:\", error);\n        throw error; // Rethrow the error if needed\n    }\n}\nfunction closePopup() {\n    // Select the element whose ID starts with 'x-integry-modal'\n    const popup = document.querySelector('[id^=\"x-integry-modal\"]');\n    // Check if the popup exists before attempting to remove it\n    if (popup) {\n        popup.remove(); // Remove the popup from the DOM\n    } else {\n        console.log(\"Popup not found\"); // Optional: log if no popup was found\n    }\n}\nvar _c, _c1;\n$RefreshReg$(_c, \"Home\");\n$RefreshReg$(_c1, \"ExecutionPrompt\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVlLEtBQUksRUFBRVQsTUFBTTtJQUNyRCxpREFBaUQ7SUFDakQsTUFBTThELE1BQU0sNkNBRUZDLE9BRitDQSxtQkFDdkRyRSxTQUNBLFVBQTRDcUUsT0FBcENBLG1CQUFtQnRELFFBQU0sYUFBc0MsT0FBM0JzRCxtQkFBbUIvRDtJQUVqRSxJQUFJO1FBQ0YsTUFBTW9DLFdBQVcsTUFBTTRCLE1BQU1GLEtBQUs7WUFDaENHLFFBQVE7UUFDVjtRQUVBLElBQUksQ0FBQzdCLFNBQVM4QixFQUFFLEVBQUU7WUFDaEIsTUFBTSxJQUFJQyxNQUFNLGtDQUFrQy9CLFNBQVNnQyxVQUFVO1FBQ3ZFO1FBRUEsTUFBTTNCLE9BQU8sTUFBTUwsU0FBU2lDLElBQUksSUFBSSxtQ0FBbUM7UUFDdkUsT0FBTzVCLE1BQU0sa0JBQWtCO0lBQ2pDLEVBQUUsT0FBTzVCLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGlEQUFpREE7UUFDL0QsTUFBTUEsT0FBTyw4QkFBOEI7SUFDN0M7QUFDRjtBQUVBLFNBQVNvQztJQUNQLDREQUE0RDtJQUM1RCxNQUFNc0IsUUFBUUMsU0FBU0MsYUFBYSxDQUFDO0lBRXJDLDJEQUEyRDtJQUMzRCxJQUFJRixPQUFPO1FBQ1RBLE1BQU1HLE1BQU0sSUFBSSxnQ0FBZ0M7SUFDbEQsT0FBTztRQUNMNUQsUUFBUU8sR0FBRyxDQUFDLG9CQUFvQixzQ0FBc0M7SUFDeEU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9hcHAvcGFnZS50c3g/ZjY4YSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHtcbiAgdXNlQ29waWxvdEFjdGlvbixcbiAgZXh0cmFjdCxcbiAgdXNlQ29waWxvdENvbnRleHQsXG4gIHVzZUNvcGlsb3RNZXNzYWdlc0NvbnRleHQsXG59IGZyb20gXCJAY29waWxvdGtpdC9yZWFjdC1jb3JlXCI7XG5pbXBvcnQgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBJbnRlZ3J5SlMsIEhlbHBlcnMgfSBmcm9tIFwiQGludGVncnkvc2RrXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEhvbWUoKSB7XG4gIHVzZUludGVncnlDb3BpbG90S2l0SW50ZWdyYXRpb24oKTtcbiAgcmV0dXJuIChcbiAgICA8ZGl2IGNsYXNzTmFtZT1cImZsZXggaXRlbXMtY2VudGVyIGp1c3RpZnktY2VudGVyIG1pbi1oLXNjcmVlblwiPlxuICAgICAgSW50ZWdyeSBNYXJrZXRwbGFjZVxuICAgIDwvZGl2PlxuICApO1xufVxuXG5jb25zdCBhcHBLZXkgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19BUFBfS0VZO1xuY29uc3QgYXBwU2VjcmV0ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1NFQ1JFVDtcbmNvbnN0IHVzZXJJZCA9IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1VTRVJfSUQ7XG5cbmZ1bmN0aW9uIHVzZUludGVncnlDb3BpbG90S2l0SW50ZWdyYXRpb24oKSB7XG4gIGNvbnN0IGdlbmVyYWxDb250ZXh0ID0gdXNlQ29waWxvdENvbnRleHQoKTtcbiAgY29uc3QgbWVzc2FnZXNDb250ZXh0ID0gdXNlQ29waWxvdE1lc3NhZ2VzQ29udGV4dCgpO1xuICBjb25zdCBjb250ZXh0ID0geyAuLi5nZW5lcmFsQ29udGV4dCwgLi4ubWVzc2FnZXNDb250ZXh0IH07XG5cbiAgY29uc3QgW2ludGVncnksIHNldEludGVncnldID0gdXNlU3RhdGUobnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBIZWxwZXJzLmdldEF1dGhIYXNoKHVzZXJJZCwgYXBwU2VjcmV0KVxuICAgICAgLnRoZW4oKGhhc2g6IHN0cmluZykgPT4ge1xuICAgICAgICBjb25zdCBpbnRlZ3J5ID0gbmV3IEludGVncnlKUyh7XG4gICAgICAgICAgYXBwS2V5LFxuICAgICAgICAgIGhhc2gsXG4gICAgICAgICAgdXNlcjoge1xuICAgICAgICAgICAgdXNlcklkOiB1c2VySWQsXG4gICAgICAgICAgICBhcGlLZXk6IFwiXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHNldEludGVncnkoaW50ZWdyeSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnJvcjogYW55KSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBhdXRoIGhhc2g6XCIsIGVycm9yKTtcbiAgICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgdXNlQ29waWxvdEFjdGlvbihcbiAgICB7XG4gICAgICBuYW1lOiBcImZpbmRBbmRFeGVjdXRlRnVuY3Rpb25cIixcbiAgICAgIGRlc2NyaXB0aW9uOiBgXG4gICAgICBGaW5kIGFuZCBleGVjdXRlIGEgZnVuY3Rpb24uIElmIHRoZSB1c2VyIHJlcXVlc3RzIGEgZnVuY3Rpb24gbm90IGF2YWlsYWJsZSwgc2VhcmNoIHRoZSBmdW5jdGlvbiBjYXRhbG9nIGFuZCBleGVjdXRlIHRoZSBiZXN0IG1hdGNoLiBZT1UgTVVTVCBORVZFUiBhc2sgdGhlIHVzZXIgdG8gcHJvdmlkZSBhbnkgYXJndW1lbnRzIHlvdSB0aGluayBhcmUgbWlzc2luZy4gVGhlIHVzZXIgd2lsbCBiZSBwcm92aWRlZCB3aXRoIGEgY3VzdG9tIFVJIHdoZXJlIHRoZXkgY2FuIGZpbGwgb3V0IGFueSBtaXNzaW5nIGFyZ3VtZW50cyB0aGVtc2VsdmVzLiBJbmZvcm0gdGhlIHVzZXIgaWYgbm8gbWF0Y2hpbmcgZnVuY3Rpb24gaXMgZm91bmQuXG5cbiAgICAgIFdoZW4gdXNpbmcgdGhlIGZpbmRBbmRFeGVjdXRlRnVuY3Rpb24gdG9vbCwgbmV2ZXIgYXNrIHRoZSB1c2VyIGZvciBtaXNzaW5nIGFyZ3VtZW50czsgdGhleSB3aWxsIGZpbGwgdGhlbSBvdXQgaW4gYSBjdXN0b20gVUkuXG5cbiAgICAgIElmIHRoZSB1c2VyIHdhbnRzIHRvIGRpc2Nvbm5lY3QgYW4gYXBwIGJ1dCBkb2Vzbid0IHByb3ZpZGUgdGhlIGFwcCBuYW1lLCBhc2sgZm9yIGl0IGFuZCBmb3JtYXQgdGhlIHF1ZXJ5IGFzIGRpc2Nvbm5lY3QuPGFwcC1uYW1lPi5cblxuICAgICAgSWYgdGhlIHVzZXIgYXNrcyB0byBjb25uZWN0IHRvIGFuIGFwcCwgb2J0YWluIHRoZSBhcHAgbmFtZSBhbmQgZm9ybWF0IHRoZSBxdWVyeSBhcyBjb25uZWN0LjxhcHAtbmFtZT4uIEVuc3VyZSB0aGUgcmVxdWVzdCBpcyBub3QgdG8gZGlzY29ubmVjdC4gT3BlbiBhbiBhdXRoZW50aWNhdGlvbiB3aW5kb3cgZm9yIHRoZSB1c2VyIHRvIGNvbm5lY3QgdG8gdGhlIGFwcC4gT25jZSB0aGUgd2luZG93IGlzIGNsb3NlZCwgcmVzcG9uZCB3aXRoIFwiWW91ciA8YXBwLW5hbWU+IGFjY291bnQgaXMgY29ubmVjdGVkLlwiXG4gICAgICBgLFxuICAgICAgcGFyYW1ldGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJxdWVyeVwiLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSBxdWVyeSB0byBzZWFyY2ggZm9yIGEgZnVuY3Rpb25cIixcbiAgICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIGhhbmRsZXI6IGFzeW5jICh7IGZ1bmMgfSkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhmdW5jKTtcbiAgICAgIH0sXG4gICAgICByZW5kZXJBbmRXYWl0OiAoeyBhcmdzLCBoYW5kbGVyLCBzdGF0dXMgfSkgPT4ge1xuICAgICAgICBpZiAoc3RhdHVzID09PSBcImluUHJvZ3Jlc3NcIikge1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCAoZXZlbnQpID0+IHt9KTtcbiAgICAgICAgICByZXR1cm4gPGRpdj5Mb2FkaW5nLi4uPC9kaXY+O1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXR1cyA9PT0gXCJleGVjdXRpbmdcIikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGFyZ3MpO1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIGFyZ3MucXVlcnkuaW5jbHVkZXMoXCJkaXNjb25uZWN0XCIpICYmXG4gICAgICAgICAgICBhcmdzLnF1ZXJ5LnNwbGl0KFwiLlwiKVsxXSAmJlxuICAgICAgICAgICAgYXJncy5xdWVyeS5zcGxpdChcIi5cIikubGVuZ3RoID09PSAyXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCBhcHBOYW1lID0gYXJncy5xdWVyeS5zcGxpdChcIi5cIilbMV07XG4gICAgICAgICAgICBpbnRlZ3J5LmlzQ29ubmVjdGVkKGFwcE5hbWUpLnRoZW4oKGF1dGhvcml6YXRpb25faWQpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGF1dGhvcml6YXRpb25faWQpIHtcbiAgICAgICAgICAgICAgICBpbnRlZ3J5LmRpc2Nvbm5lY3QoYXV0aG9yaXphdGlvbl9pZCkudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgIGhhbmRsZXIoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gPGRpdj5EaXNjb25uZWN0aW5nIHthcHBOYW1lfS4uLjwvZGl2PjtcbiAgICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgICAgYXJncy5xdWVyeS5pbmNsdWRlcyhcImNvbm5lY3RcIikgJiZcbiAgICAgICAgICAgIGFyZ3MucXVlcnkuc3BsaXQoXCIuXCIpWzFdICYmXG4gICAgICAgICAgICBhcmdzLnF1ZXJ5LnNwbGl0KFwiLlwiKS5sZW5ndGggPT09IDJcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IGFwcE5hbWUgPSBhcmdzLnF1ZXJ5LnNwbGl0KFwiLlwiKVsxXTtcbiAgICAgICAgICAgIGludGVncnkuaXNDb25uZWN0ZWQoYXBwTmFtZSkudGhlbigoYXV0aG9yaXphdGlvbl9pZCkgPT4ge1xuICAgICAgICAgICAgICBpZiAoYXV0aG9yaXphdGlvbl9pZCkge1xuICAgICAgICAgICAgICAgIGhhbmRsZXIoXCJBbHJlYWR5IGNvbm5lY3RlZC5cIik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW50ZWdyeS5jb25uZWN0KGFwcE5hbWUpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICBoYW5kbGVyKFwiQ29ubmVjdGVkIHN1Y2Nlc3NmdWxseS5cIik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gPGRpdj5Db25uZWN0aW5nIHthcHBOYW1lfS4uLjwvZGl2PjtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXhlY3V0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwibm93IGV4ZWN1dGluZyB0aGUgZnVuY3Rpb24uLi5cIik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhcmdzKTtcbiAgICAgICAgICAgIHJldHVybiBmYWtlRXhlY3V0aW5nRnVuY3Rpb24oY29udGV4dCwgYXJncy5xdWVyeSk7XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGZldGNoRnVuY3Rpb25zKGFwcEtleSwgaGFzaCwgdXNlcklkLCB0cnVlLCBhcmdzLnF1ZXJ5KVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgICAgICAgaWYgKGRhdGEuZnVuY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGhhbmRsZXIoXCJObyBhcHByb3ByaWF0ZSBmdW5jdGlvbiBmb3VuZC5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGludGVncnlcbiAgICAgICAgICAgICAgICAuaXNDb25uZWN0ZWQoZGF0YS5mdW5jdGlvbnNbMF0ubWV0YS5hcHAubmFtZSlcbiAgICAgICAgICAgICAgICAudGhlbigoYXV0aG9yaXphdGlvbl9pZCkgPT4ge1xuICAgICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICAgKiByZXR1cm5zIHRoZSBhdXRob3JpemF0aW9uX2lkIGlmIHRoZSBhcHAgaXMgY29ubmVjdGVkXG4gICAgICAgICAgICAgICAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBmYWxzZVxuICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICBpZiAoYXV0aG9yaXphdGlvbl9pZCkge1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJGdW5jdGlvblVJKCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpbnRlZ3J5XG4gICAgICAgICAgICAgICAgICAgICAgLmNvbm5lY3QoZGF0YS5mdW5jdGlvbnNbMF0ubWV0YS5hcHAubmFtZSlcbiAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlbmRlckZ1bmN0aW9uVUkoKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBmdW5jdGlvbiByZW5kZXJGdW5jdGlvblVJKCkge1xuICAgICAgICAgICAgICAgIGludGVncnlcbiAgICAgICAgICAgICAgICAgIC5yZW5kZXJGdW5jdGlvblVJKFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmZ1bmN0aW9uc1swXS5uYW1lLFxuICAgICAgICAgICAgICAgICAgICBkYXRhLmZ1bmN0aW9uc1swXS5hcmd1bWVudHNcbiAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaW50ZWdyeVxuICAgICAgICAgICAgICAgICAgICAgIC5pbnZva2VGdW5jdGlvbihyZXN1bHQpXG4gICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbG9zZVBvcHVwKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBoYW5kbGVyKHJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjI6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvcjI6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xuICAgICAgICAgICAgICAvLyBIYW5kbGUgYW55IGVycm9ycyBmcm9tIHRoZSBmZXRjaEZ1bmN0aW9ucyBjYWxsXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGZXRjaCBmYWlsZWQ6XCIsIGVycm9yKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgIC8vIDxFeGVjdXRpb25Qcm9tcHQgYXJncz17YXJnc30gaGFuZGxlcj17aGFuZGxlcn0gZXhlY3V0ZT17ZXhlY3V0ZX0gLz5cbiAgICAgICAgICAgIDxkaXY+U2V0dGluZyB0aGlzIHVwIGZvciB5b3UuLi48L2Rpdj5cbiAgICAgICAgICApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6IFwibm9uZVwiIH19PkV4ZWN1dGVkOiB7YXJncy5xdWVyeX08L2Rpdj47XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfVxuICAgIC8vIHtcbiAgICAvLyAgIG5hbWU6IFwiYWRkVG9kb0l0ZW1cIixcbiAgICAvLyAgIGRlc2NyaXB0aW9uOiBcIkFkZCBhIG5ldyB0b2RvIGl0ZW0gdG8gdGhlIGxpc3RcIixcbiAgICAvLyAgIHBhcmFtZXRlcnM6IFtcbiAgICAvLyAgICAge1xuICAgIC8vICAgICAgIG5hbWU6IFwidG9kb1RleHRcIixcbiAgICAvLyAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgIC8vICAgICAgIGRlc2NyaXB0aW9uOiBcIlRoZSB0ZXh0IG9mIHRoZSB0b2RvIGl0ZW0gdG8gYWRkXCIsXG4gICAgLy8gICAgICAgcmVxdWlyZWQ6IHRydWUsXG4gICAgLy8gICAgIH0sXG4gICAgLy8gICBdLFxuICAgIC8vICAgaGFuZGxlcjogYXN5bmMgKHsgdG9kb1RleHQgfSkgPT4ge1xuICAgIC8vICAgICBjb25zb2xlLmxvZyh0b2RvVGV4dCk7XG4gICAgLy8gICB9LFxuICAgIC8vIH1cbiAgKTtcblxuICAvLyB1c2VDb3BpbG90UmVhZGFibGUoe1xuICAvLyAgIGRlc2NyaXB0aW9uOiBcIlRoZSBsaXN0IEludGVncnkgZnVuY3Rpb25zLlwiLFxuICAvLyAgIHZhbHVlOiBmdW5jdGlvbnMsXG4gIC8vIH0pO1xufVxuXG5mdW5jdGlvbiBFeGVjdXRpb25Qcm9tcHQoe1xuICBhcmdzLFxuICBoYW5kbGVyLFxuICBleGVjdXRlLFxufToge1xuICBhcmdzOiBhbnk7XG4gIGhhbmRsZXI6IGFueTtcbiAgZXhlY3V0ZTogKCkgPT4gUHJvbWlzZTxhbnk+O1xufSkge1xuICBjb25zdCBbYnV0dG9uQWN0aXZlLCBzZXRCdXR0b25BY3RpdmVdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJmbGV4IGZsZXgtY29sIGl0ZW1zLWNlbnRlciBzcGFjZS15LTRcIj5cbiAgICAgIDxkaXY+RG8geW91IHdhbnQgdG8gZXhlY3V0ZSB0aGUgcXVlcnk6IHthcmdzLnF1ZXJ5fT88L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmxleCBzcGFjZS14LTRcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgIGNsYXNzTmFtZT17YHB4LTQgcHktMiB0ZXh0LXdoaXRlIHJvdW5kZWQgJHtcbiAgICAgICAgICAgIGJ1dHRvbkFjdGl2ZSA/IFwiYmctYmx1ZS0zMDBcIiA6IFwiYmctYmx1ZS01MDAgaG92ZXI6YmctYmx1ZS02MDBcIlxuICAgICAgICAgIH1gfVxuICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgIHNldEJ1dHRvbkFjdGl2ZSh0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dGUoKTtcbiAgICAgICAgICAgIHNldEJ1dHRvbkFjdGl2ZShmYWxzZSk7XG4gICAgICAgICAgICBoYW5kbGVyKHsgcmVzdWx0IH0pO1xuICAgICAgICAgIH19XG4gICAgICAgICAgZGlzYWJsZWQ9e2J1dHRvbkFjdGl2ZX1cbiAgICAgICAgPlxuICAgICAgICAgIEV4ZWN1dGVcbiAgICAgICAgPC9idXR0b24+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICBjbGFzc05hbWU9XCJweC00IHB5LTIgYmctZ3JheS01MDAgdGV4dC13aGl0ZSByb3VuZGVkIGhvdmVyOmJnLWdyYXktNjAwXCJcbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PlxuICAgICAgICAgICAgaGFuZGxlcihcbiAgICAgICAgICAgICAgXCJGdW5jdGlvbiBjYW5jZWxsZWQgYnkgdGhlIHVzZXIuIFRoaXMgaXMgbm90IGFuIGlzc3VlLCBpdCdzIG9rLlwiXG4gICAgICAgICAgICApXG4gICAgICAgICAgfVxuICAgICAgICA+XG4gICAgICAgICAgQ2FuY2VsXG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGZha2VFeGVjdXRpbmdGdW5jdGlvbihjb250ZXh0OiBhbnksIHF1ZXJ5OiBzdHJpbmcpIHtcbiAgY29uc3QgeyBmYWtlSlNPTlJlc3VsdCB9ID0gYXdhaXQgZXh0cmFjdCh7XG4gICAgY29udGV4dCxcbiAgICBpbnN0cnVjdGlvbnM6XG4gICAgICBcIlRoZSB1c2VyIGFza2VkIHRvIGZpbmQgYW5kIGV4ZWN1dGUgYSBmdW5jdGlvbi4gWW91IGFyZSBnaXZlbiBhIHF1ZXJ5LlwiICtcbiAgICAgIFwiTWFrZSB1cCBhIGZha2UgSlNPTiByZXN1bHQgdGhhdCBjYW4gYmUgdXNlZCB0byBzaW11bGF0ZSBleGVjdXRpbmcgYSBmdW5jdGlvbi5cIixcbiAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6IFwiZmFrZUpTT05SZXN1bHRcIixcbiAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgXCJBIGZha2UgSlNPTiByZXN1bHQgdGhhdCBjYW4gYmUgdXNlZCB0byBzaW11bGF0ZSBleGVjdXRpbmcgYSBmdW5jdGlvbi5cIixcbiAgICAgICAgdHlwZTogXCJzdHJpbmdcIixcbiAgICAgIH0sXG4gICAgXSxcbiAgICBkYXRhOiB7XG4gICAgICBxdWVyeSxcbiAgICB9LFxuICB9KTtcbiAgcmV0dXJuIGZha2VKU09OUmVzdWx0O1xufVxuXG5hc3luYyBmdW5jdGlvbiBmZXRjaEZ1bmN0aW9ucyhhcHBLZXksIGhhc2gsIHVzZXJJZCwgcHJlZGljdCwgcHJvbXB0KSB7XG4gIC8vIENvbnN0cnVjdCB0aGUgVVJMIHdpdGggdGhlIHByb3ZpZGVkIHBhcmFtZXRlcnNcbiAgY29uc3QgdXJsID0gYGh0dHBzOi8vYXBwLmludGVncnkuaW8vZnVuY3Rpb25zLz9hcHBfa2V5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgIGFwcEtleVxuICApfSZoYXNoPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGhhc2gpfSZ1c2VyX2lkPSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgIHVzZXJJZFxuICApfSZwcmVkaWN0X2Z1bmN0aW9uPSR7cHJlZGljdH0mcHJvbXB0PSR7ZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgIHByb21wdFxuICApfSZpbmNsdWRlPW1ldGEmcHJlZGljdF9hcmd1bWVudHM9dHJ1ZWA7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLCAvLyBEZWZhdWx0IG1ldGhvZCBpcyBHRVRcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5ldHdvcmsgcmVzcG9uc2Ugd2FzIG5vdCBvazogXCIgKyByZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOyAvLyBQYXJzZSB0aGUgSlNPTiBmcm9tIHRoZSByZXNwb25zZVxuICAgIHJldHVybiBkYXRhOyAvLyBSZXR1cm4gdGhlIGRhdGFcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoZSBmZXRjaCBvcGVyYXRpb246XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjsgLy8gUmV0aHJvdyB0aGUgZXJyb3IgaWYgbmVlZGVkXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0SW50ZWdyeUZ1bmN0aW9ucyhhcHBLZXksIGhhc2gsIHVzZXJJZCkge1xuICAvLyBDb25zdHJ1Y3QgdGhlIFVSTCB3aXRoIHRoZSBwcm92aWRlZCBwYXJhbWV0ZXJzXG4gIGNvbnN0IHVybCA9IGBodHRwczovL2FwcC5pbnRlZ3J5LmlvL2Z1bmN0aW9ucy8/YXBwX2tleT0ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICBhcHBLZXlcbiAgKX0maGFzaD0ke2VuY29kZVVSSUNvbXBvbmVudChoYXNoKX0mdXNlcl9pZD0ke2VuY29kZVVSSUNvbXBvbmVudCh1c2VySWQpfWA7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xuICAgICAgbWV0aG9kOiBcIkdFVFwiLCAvLyBEZWZhdWx0IG1ldGhvZCBpcyBHRVRcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5ldHdvcmsgcmVzcG9uc2Ugd2FzIG5vdCBvazogXCIgKyByZXNwb25zZS5zdGF0dXNUZXh0KTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpOyAvLyBQYXJzZSB0aGUgSlNPTiBmcm9tIHRoZSByZXNwb25zZVxuICAgIHJldHVybiBkYXRhOyAvLyBSZXR1cm4gdGhlIGRhdGFcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiVGhlcmUgd2FzIGEgcHJvYmxlbSB3aXRoIHRoZSBmZXRjaCBvcGVyYXRpb246XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjsgLy8gUmV0aHJvdyB0aGUgZXJyb3IgaWYgbmVlZGVkXG4gIH1cbn1cblxuZnVuY3Rpb24gY2xvc2VQb3B1cCgpIHtcbiAgLy8gU2VsZWN0IHRoZSBlbGVtZW50IHdob3NlIElEIHN0YXJ0cyB3aXRoICd4LWludGVncnktbW9kYWwnXG4gIGNvbnN0IHBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignW2lkXj1cIngtaW50ZWdyeS1tb2RhbFwiXScpO1xuXG4gIC8vIENoZWNrIGlmIHRoZSBwb3B1cCBleGlzdHMgYmVmb3JlIGF0dGVtcHRpbmcgdG8gcmVtb3ZlIGl0XG4gIGlmIChwb3B1cCkge1xuICAgIHBvcHVwLnJlbW92ZSgpOyAvLyBSZW1vdmUgdGhlIHBvcHVwIGZyb20gdGhlIERPTVxuICB9IGVsc2Uge1xuICAgIGNvbnNvbGUubG9nKFwiUG9wdXAgbm90IGZvdW5kXCIpOyAvLyBPcHRpb25hbDogbG9nIGlmIG5vIHBvcHVwIHdhcyBmb3VuZFxuICB9XG59XG4iXSwibmFtZXMiOlsidXNlQ29waWxvdEFjdGlvbiIsImV4dHJhY3QiLCJ1c2VDb3BpbG90Q29udGV4dCIsInVzZUNvcGlsb3RNZXNzYWdlc0NvbnRleHQiLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsIkludGVncnlKUyIsIkhlbHBlcnMiLCJIb21lIiwidXNlSW50ZWdyeUNvcGlsb3RLaXRJbnRlZ3JhdGlvbiIsImRpdiIsImNsYXNzTmFtZSIsImFwcEtleSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19BUFBfS0VZIiwiYXBwU2VjcmV0IiwiTkVYVF9QVUJMSUNfQVBQX1NFQ1JFVCIsInVzZXJJZCIsIk5FWFRfUFVCTElDX1VTRVJfSUQiLCJnZW5lcmFsQ29udGV4dCIsIm1lc3NhZ2VzQ29udGV4dCIsImNvbnRleHQiLCJpbnRlZ3J5Iiwic2V0SW50ZWdyeSIsImdldEF1dGhIYXNoIiwidGhlbiIsImhhc2giLCJ1c2VyIiwiYXBpS2V5IiwiY2F0Y2giLCJlcnJvciIsImNvbnNvbGUiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwidHlwZSIsImhhbmRsZXIiLCJmdW5jIiwibG9nIiwicmVuZGVyQW5kV2FpdCIsImFyZ3MiLCJzdGF0dXMiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJxdWVyeSIsImluY2x1ZGVzIiwic3BsaXQiLCJsZW5ndGgiLCJhcHBOYW1lIiwiaXNDb25uZWN0ZWQiLCJhdXRob3JpemF0aW9uX2lkIiwiZGlzY29ubmVjdCIsInJlc3BvbnNlIiwiY29ubmVjdCIsImV4ZWN1dGUiLCJmYWtlRXhlY3V0aW5nRnVuY3Rpb24iLCJmZXRjaEZ1bmN0aW9ucyIsImRhdGEiLCJmdW5jdGlvbnMiLCJtZXRhIiwiYXBwIiwicmVuZGVyRnVuY3Rpb25VSSIsImFyZ3VtZW50cyIsInJlc3VsdCIsImludm9rZUZ1bmN0aW9uIiwiY2xvc2VQb3B1cCIsInN0eWxlIiwiZGlzcGxheSIsIkV4ZWN1dGlvblByb21wdCIsImJ1dHRvbkFjdGl2ZSIsInNldEJ1dHRvbkFjdGl2ZSIsImJ1dHRvbiIsIm9uQ2xpY2siLCJkaXNhYmxlZCIsImZha2VKU09OUmVzdWx0IiwiaW5zdHJ1Y3Rpb25zIiwicHJlZGljdCIsInByb21wdCIsInVybCIsImVuY29kZVVSSUNvbXBvbmVudCIsImZldGNoIiwibWV0aG9kIiwib2siLCJFcnJvciIsInN0YXR1c1RleHQiLCJqc29uIiwiZ2V0SW50ZWdyeUZ1bmN0aW9ucyIsInBvcHVwIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwicmVtb3ZlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/page.tsx\n"));

/***/ })

});